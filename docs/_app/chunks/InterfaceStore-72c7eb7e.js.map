{"version":3,"file":"InterfaceStore-72c7eb7e.js","sources":["../../../../../node_modules/mitt/dist/mitt.mjs","../../../../../src/lib/assets/logos/p.svg","../../../../../src/lib/store/InterfaceStore.js"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","export default \"__VITE_ASSET__036ad820__\"","import { reactive } from './utils';\r\nimport { writable, derived, get } from 'svelte/store';\r\n\r\nimport mitt from 'mitt';\r\n\r\nimport logoArweaveBlack from '$lib/assets/logos/arweaveBlack.svg';\r\nimport logoArweave from '$lib/assets/logos/arweave.svg';\r\nimport peerpiper from '$lib/assets/logos/p.svg';\r\n\r\n// can be used in App with:\r\n// $get(interfaceStore).set('toolbar.enabled', false)\r\nexport const interfaceStore = reactive({\r\n\twindowWidth: window?.innerWidth,\r\n\twindowVisible: !document.hidden,\r\n\ttoolbar: {\r\n\t\tenabled: true,\r\n\t\tlinks: true\r\n\t},\r\n\tbreakpoints: {\r\n\t\tverticalLayout: window?.innerWidth < 600,\r\n\t\tverticalContent: window?.innerWidth < 1100\r\n\t},\r\n\tsticky: false,\r\n\tdragOverlay: false,\r\n\twallet: {\r\n\t\tsend: {\r\n\t\t\ttarget: '',\r\n\t\t\tquantity: '',\r\n\t\t\tdata: '',\r\n\t\t\ttags: []\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// derived store, update if original store (above) changes\r\nexport const verticalLayout = derived(\r\n\tinterfaceStore,\r\n\t($interfaceStore) => $interfaceStore.breakpoints.verticalLayout\r\n);\r\n\r\nexport const verticalContent = derived(\r\n\tinterfaceStore,\r\n\t($interfaceStore) => $interfaceStore.breakpoints.verticalContent\r\n);\r\n\r\nexport const dragOverlay = derived(\r\n\tinterfaceStore,\r\n\t($interfaceStore) => $interfaceStore.dragOverlay\r\n);\r\n\r\nexport const emitter = mitt();\r\n\r\nemitter.once = (eventName, handler) => {\r\n\treturn new Promise((resolve) => {\r\n\t\tconst wrapper = (e) => {\r\n\t\t\temitter.off(eventName, wrapper);\r\n\t\t\tresolve(e);\r\n\t\t\tif (handler) {\r\n\t\t\t\thandler(e);\r\n\t\t\t}\r\n\t\t};\r\n\t\temitter.on(eventName, wrapper);\r\n\t});\r\n};\r\n\r\nfunction updateWindowSize() {\r\n\tget(interfaceStore).set('windowWidth', window?.innerWidth);\r\n\tget(interfaceStore).set('breakpoints.verticalLayout', window?.innerWidth < 600);\r\n\tget(interfaceStore).set('breakpoints.verticalContent', window?.innerWidth < 1100);\r\n}\r\nupdateWindowSize();\r\n\r\nwindow?.addEventListener('resize', updateWindowSize);\r\n\r\ndocument.addEventListener('visibilitychange', () =>\r\n\tget(interfaceStore).set('windowVisible', !document.hidden)\r\n);\r\n\r\nlet dragCount = 0;\r\ndocument.addEventListener(\r\n\t'dragenter',\r\n\t(e) => {\r\n\t\te.preventDefault();\r\n\t\tif (e.dataTransfer.types[0] == 'Files') {\r\n\t\t\tget(interfaceStore).set('dragOverlay', !!++dragCount);\r\n\t\t}\r\n\t},\r\n\ttrue\r\n);\r\ndocument.addEventListener(\r\n\t'dragleave',\r\n\t(e) => {\r\n\t\te.preventDefault();\r\n\t\tif (e.dataTransfer.types[0] == 'Files') {\r\n\t\t\tget(interfaceStore).set('dragOverlay', !!--dragCount);\r\n\t\t}\r\n\t},\r\n\ttrue\r\n);\r\ndocument.addEventListener(\r\n\t'dragend',\r\n\t(e) => {\r\n\t\te.preventDefault();\r\n\t\tdragCount = 0;\r\n\t\tget(interfaceStore).set('dragOverlay', false);\r\n\t},\r\n\ttrue\r\n);\r\ndocument.addEventListener(\r\n\t'dragover',\r\n\t(e) => {\r\n\t\te.preventDefault();\r\n\t},\r\n\ttrue\r\n);\r\ndocument.addEventListener(\r\n\t'drop',\r\n\t(e) => {\r\n\t\te.preventDefault();\r\n\t\tdragCount = 0;\r\n\t\tget(interfaceStore).set('dragOverlay', false);\r\n\t},\r\n\ttrue\r\n);\r\n\r\nif (navigator.appVersion.indexOf('Win') != -1) {\r\n\tdocument.documentElement.classList.add('styleScroll');\r\n}\r\n\r\nconst faviconEl = document.createElement('link');\r\nfaviconEl.setAttribute('rel', 'favicon icon');\r\n\r\nconst setFavicon = (e) => {\r\n\tfaviconEl.remove();\r\n\tif (e.matches) {\r\n\t\tfaviconEl.setAttribute('href', peerpiper);\r\n\t} else {\r\n\t\tfaviconEl.setAttribute('href', peerpiper);\r\n\t}\r\n\tdocument.head.appendChild(faviconEl);\r\n};\r\n\r\nif (window?.matchMedia) {\r\n\tconst matchTheme = window?.matchMedia('(prefers-color-scheme: light)');\r\n\tmatchTheme.addEventListener('change', setFavicon);\r\n\tsetFavicon(matchTheme);\r\n} else {\r\n\tsetFavicon({ matches: false });\r\n}\r\n"],"names":["get"],"mappings":"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"}